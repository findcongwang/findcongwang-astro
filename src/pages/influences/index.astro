---
// Fundations
import BaseLayout from "@/layouts/BaseLayout.astro";
import Text from "@/components/fundations/elements/Text.astro";
import Wrapper from "@/components/fundations/containers/Wrapper.astro";
// Components
import InfluencesEntry from "@/components/influences/InfluencesEntry.astro";
// Content
import { getCollection } from "astro:content";
const allAuthors = (await getCollection("influences")).sort((a, b) => 
  a.data.name.localeCompare(b.data.name)
);

const completedInfluences = allAuthors.filter(
  (item) => !item.data.description?.toLowerCase().includes("page under construction")
);
const underConstructionInfluences = allAuthors.filter(
  (item) => item.data.description?.toLowerCase().includes("page under construction")
);
---

<BaseLayout>
  <section>
    <Wrapper variant="standard" class="pt-24 pb-12 lg:pt-48">
      <Text tag="h1" variant="textBase" class="text-primary">
        Influences and Precedents
      </Text>
      <Text
        tag="p"
        variant="textBase"
        class="font-serif text-primary/60 text-balance mt-2"
      >
        A list of people, books, patterns, and ideas that have influenced my work and thinking.
      </Text>
      {completedInfluences.length > 0 && (
        <div
          class="pt-2 mt-4 border-t border-dotted border-primary/10 flex flex-col gap-2"
        >
          {completedInfluences.map((post) => <InfluencesEntry post={post} />)}
        </div>
      )}

      {underConstructionInfluences.length > 0 && (
        <div class="mt-12">
          <Text tag="h2" variant="textBase" class="text-primary mb-4">
            Pages Under Construction
          </Text>
          <div
            class="border-t border-dotted border-primary/10 pt-2 flex flex-col gap-2"
          >
            {underConstructionInfluences.map((post) => <InfluencesEntry post={post} />)}
          </div>
        </div>
      )}
    </Wrapper>
  </section>
</BaseLayout>
